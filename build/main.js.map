{"version":3,"sources":["../../src/pages/home/list/game-music.provider.ts","../../src/common/rxjs.deps.ts","../../src/common/storage/storage-manager.provider.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/home/home.ts","../../src/common/player/track-scroller.provider.ts","../../src/pages/home/list/list-source.enum.ts","../../src/common/player/volume-slider/volume-slider.component.ts","../../src/common/player/player.reducer.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/common/player/player.selectors.ts","../../src/common/player/player.actions.ts","../../src/pages/home/home.selectors.ts","../../src/pages/home/list/game-music-list.component.ts","../../src/pages/home/nav/navbar-music-control.component.ts","../../src/common/player/playback.component.ts","../../src/pages/home/list/game-music-list-item.component.ts","../../src/pages/home/list/game-music-list-item-more.component.ts","../../src/app/app.reducers.ts","../../src/pages/home/home.reducer.ts","../../src/common/pipes/duration-formatter.ts","../../src/pages/home/nav/navbar-search.component.ts","../../src/pages/home/nav/navbar-logo.component.ts","../../src/common/tracking/google-analytics-tracker.provider.ts","../../src/pages/home/home.actions.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Track } from \"../../../common/player/track.interface\";\n\nexport interface ITrackData {\n\ttracks: Array<Track>\n};\n\nexport class GameMusicProvider {\n\n\tstatic data: ITrackData = {\n\t\ttracks: []\n\t};\n\n\tstatic getRandomTrack(): Track {\n\t\treturn this.data.tracks[Math.floor(Math.random() * this.data.tracks.length)]\n\t}\n\n\t/**\n\t * gets the next track in the list after the passed track.\n\t *\n\t * @param track currentTrack\n\t */\n\tstatic getNextTrack(track: Track | null): Track {\n\t\tconst currentTrackIndex = this.data.tracks\n\t\t\t.map((item, index) => ({index, trackName: item.trackName}))\n\t\t\t.filter(item => track && item.trackName === track.trackName)\n\t\t\t.concat([null])\n\t\t\t.map(item => item ? item.index : null)\n\t\t\t[0];\n\t\tconst nextTrackIndex = (currentTrackIndex !== null && currentTrackIndex + 1 < this.data.tracks.length) ?\n\t\t\tcurrentTrackIndex + 1 :\n\t\t\t0;\n\t\treturn this.data.tracks\n\t\t\t.filter((item, index) => index === nextTrackIndex)\n\t\t\t.concat([null])\n\t\t\t[0];\n\t}\n\n\t/**\n\t * returns a track by its name.\n\t * if none could be found, a random track will be returned.\n\t */\n\tstatic getTrackByName(trackName: string): Track {\n\t\tconst selectedTracks = this.data.tracks\n\t\t\t.filter(track => track.trackName.indexOf(`${trackName}.m4a`) !== -1);\n\t\treturn (selectedTracks.length > 0) ?\n\t\t\tselectedTracks[0] :\n\t\t\tthis.getNextTrack(null);\n\t}\n\n\tstatic getTracksByIds(trackIds: string[]): Track[] {\n\t\treturn (!trackIds) ?\n\t\t\t[] :\n\t\t\tthis.data.tracks\n\t\t\t\t.filter(track => trackIds.indexOf(track.trackName.substr(0, track.trackName.length-4)) !== -1);\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/list/game-music.provider.ts","import 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/observable/interval';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/operator/first';\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/rxjs.deps.ts","import { Injectable } from '@angular/core';\nimport { Store } from \"@ngrx/store\";\nimport { AppState } from \"../../app/app.state\";\nimport { getFaveIds } from \"../player/player.selectors\";\n\n\nexport enum Field {\n\tFAVE_IDS,\n}\n\n@Injectable()\nexport class StorageManager {\n\n\tprivate FIELD_FAVE_IDS = 'faveIds';\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t) {\n\t\tthis.store.select(getFaveIds)\n\t\t\t.subscribe(faveIds => {\n\t\t\t\tlocalStorage.setItem(this.FIELD_FAVE_IDS, JSON.stringify(faveIds));\n\t\t\t});\n\t}\n\n\tstatic getItem(field: Field, defaultValue: any) {\n\t\tlet value;\n\t\tswitch (field) {\n\t\t\tcase Field.FAVE_IDS:\n\t\t\t\tvalue = localStorage.getItem('faveIds');\n\t\t\t\treturn (value !== null) ?\n\t\t\t\t\tJSON.parse(value) :\n\t\t\t\t\tdefaultValue;\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/storage/storage-manager.provider.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 149;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 149\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 190;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 190\n// module chunks = 0","import { Component, ViewChild } from '@angular/core';\nimport {Â Location } from '@angular/common';\nimport { Content, NavController, ToastController } from \"ionic-angular\";\nimport { Observable } from 'rxjs/Observable';\nimport { Store } from \"@ngrx/store\";\nimport { AppState } from \"../../app/app.state\";\nimport { TrackScroller } from \"../../common/player/track-scroller.provider\";\nimport { getTracksRendered } from \"./home.selectors\";\nimport { getCurrentTrack, getFaveIds } from \"../../common/player/player.selectors\";\nimport { ListSource } from \"./list/list-source.enum\";\n\n\n@Component({\n\tselector: 'page-home',\n\ttemplateUrl: 'home.html'\n})\nexport class HomePage {\n\n\t@ViewChild(Content) content: Content;\n\n\tpublic segment = '';\n\tpublic tracksRendered$: Observable<boolean>;\n\tpublic sources = ListSource;\n\tpublic faveIds$: Observable<string[]>;\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate navCtrl: NavController,\n\t\tprivate location: Location,\n\t\tprivate toastCtrl: ToastController,\n\t) {\n\t\tthis.tracksRendered$ = this.store.select(getTracksRendered);\n\t\tthis.faveIds$ = this.store.select(getFaveIds);\n\n\t\t// update url everytime the track changes\n\t\tthis.store.select(getCurrentTrack)\n\t\t\t.filter(track => track !== null)\n\t\t\t.subscribe(track => {\n\t\t\t\tconst trackUrl = track.trackName.substr(0, track.trackName.length-4);\n\t\t\t\tlocation.replaceState(trackUrl);\n\t\t\t});\n\t}\n\n\tngOnInit() {\n\n\t\t// listen to the service worker promise in index.html to see if there has been a new update.\n\t\t// condition: the service-worker.js needs to have some kind of change - e.g. increment CACHE_VERSION.\n\t\twindow['isUpdateAvailable']\n\t\t\t.then(isAvailable => {\n\t\t\t\tif (isAvailable) {\n\t\t\t\t\tconst toast = this.toastCtrl.create({\n\t\t\t\t\t\tmessage: 'New Update available! Reload the webapp to see the latest juicy changes.',\n\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\tshowCloseButton: true,\n\t\t\t\t\t});\n\t\t\t\t\ttoast.present();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tngAfterViewInit() {\n\t\t// setting content for scroller\n\t\tTrackScroller.content = this.content;\n\t\tTrackScroller.store = this.store;\n\n\t\t// this.tracksRendered$\n\t\t// \t.filter(Boolean)\n\t\t// \t.subscribe(() => TrackScroller.scrollToSelectedTrack());\n\t}\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Content } from \"ionic-angular\";\nimport { GameMusicProvider } from \"../../pages/home/list/game-music.provider\";\nimport { Store } from \"@ngrx/store\";\nimport { AppState } from \"../../app/app.state\";\nimport { getCurrentTrack } from \"./player.selectors\";\nimport '../rxjs.deps';\n\nexport class TrackScroller {\n\n\tstatic content: Content;\n\tstatic store: Store<AppState>;\n\n\tstatic scrollToSelectedTrack(selectedClass = '.game-music-list-item--selected'): void {\n\t\tconst ROW_HEIGHT = 48;\n\t\tthis.store.select(getCurrentTrack)\n\t\t\t.first()\n\t\t\t.subscribe(currentTrack => {\n\t\t\t\tconst trackIndex = GameMusicProvider.data.tracks\n\t\t\t\t\t.reduce((obj, item, index) => {\n\t\t\t\t\t\treturn (item === currentTrack) ?\n\t\t\t\t\t\t\tindex :\n\t\t\t\t\t\t\tobj;\n\t\t\t\t\t}, 0);\n\t\t\t\tthis.content.scrollTo(0, trackIndex * ROW_HEIGHT, 600);\n\t\t\t});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/track-scroller.provider.ts","export enum ListSource {\n\tALL,\n\tFAVES,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/list/list-source.enum.ts","import { Component } from '@angular/core';\nimport { Store } from \"@ngrx/store\";\nimport { AppState } from \"../../../app/app.state\";\nimport { getVolume } from \"../player.selectors\";\nimport { PlayerActions } from \"../player.actions\";\n\n@Component({\n\ttemplate: `\n\t\t<ion-item>\n\t\t\t<ion-range\n\t\t\t\tmin=\"0\"\n\t\t\t\tmax=\"100\"\n\t\t\t\tstep=\"10\"\n\t\t\t\tsnaps=\"false\"\n\t\t\t\tcolor=\"dark\"\n\t\t\t\t[(ngModel)]=\"sliderValue\"\n\t\t\t\t(ionChange)=\"onRangeChanged()\">\n\n\t\t\t\t<ion-icon range-left name=\"volume-mute\"></ion-icon>\n     \t\t\t<ion-icon range-right name=\"volume-up\"></ion-icon>\n\t\t\t</ion-range>\n\t\t</ion-item>\n\t`,\n})\nexport class VolumeSlider {\n\n\tsliderValue: number;\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t) {\n\t\tthis.store.select(getVolume)\n\t\t\t.subscribe(volume => this.sliderValue = volume);\n\t}\n\n\tonRangeChanged(evt) {\n\t\tthis.store.dispatch(this.playerActions.setVolume(this.sliderValue));\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/volume-slider/volume-slider.component.ts","import { Action } from \"@ngrx/store\";\nimport { PlayerActions } from \"./player.actions\";\nimport { Track } from \"./track.interface\";\nimport { StorageManager, Field } from \"../storage/storage-manager.provider\";\n\nexport enum AudioState {\n\tUNLOADED,\n\tLOADING,\n\tLOADED\n}\n\nexport interface PlayerState {\n\tvolume: number;\n\tisShuffle: boolean;\n\tisRepeat: boolean;\n\tisPlaying: boolean;\n\tisMuted: boolean;\n\tcurrentTrack: Track;\n\ttrackListDownloaded: boolean;\n\taudioState: AudioState;\n\tfaveIds: string[],\n\ttrackFilter: string,\n}\n\nconst defaultState: PlayerState = {\n\tvolume: 30,\n\tisShuffle: true,\n\tisRepeat: false,\n\tisPlaying: false,\n\tisMuted: false,\n\tcurrentTrack: null,\n\ttrackListDownloaded: false,\n\taudioState: AudioState.UNLOADED,\n\tfaveIds: StorageManager.getItem(Field.FAVE_IDS, []),\n\ttrackFilter: '',\n};\n\nexport function PlayerReducer(state: PlayerState = defaultState, action: Action): any  {\n\tswitch (action.type) {\n\n\t\tcase PlayerActions.TOGGLE_SETTING:\n\t\t\tconst changedSetting = {};\n\t\t\tchangedSetting[action.payload] = !state[action.payload];\n\t\t\treturn Object.assign({}, state, changedSetting);\n\n\t\tcase PlayerActions.SET_VOLUME:\n\t\t\treturn Object.assign({}, state, {volume: action.payload});\n\n\t\tcase PlayerActions.SELECT_TRACK:\n\t\t\tconst changedState = Object.assign({}, state, {currentTrack: action.payload});\n\t\t\tchangedState.isPlaying = (action.payload === null) ?\n\t\t\t\tfalse :\n\t\t\t\ttrue;\n\t\t\treturn changedState;\n\n\t\tcase PlayerActions.SET_AUDIO_STATE:\n\t\t\tconst changedAudioState = {audioState: action.payload};\n\t\t\treturn Object.assign({}, state, changedAudioState);\n\n\t\tcase PlayerActions.SET_LIST_DOWNLOADED:\n\t\t\treturn Object.assign({}, state, {trackListDownloaded: action.payload});\n\n\t\tcase PlayerActions.TOGGLE_FAVE_TRACK:\n\t\t\t// check if track needs to be added or removed\n\t\t\tconst trackName = action.payload.trackName.substr(0, action.payload.trackName.length - 4);\n\t\t\tconst faveIds = (state.faveIds.indexOf(trackName) !== -1) ?\n\t\t\t\tstate.faveIds.filter(faveId => faveId !== trackName) :\n\t\t\t\tstate.faveIds.concat(trackName);\n\t\t\treturn Object.assign({}, state, {faveIds});\n\n\t\tcase PlayerActions.SET_SEARCH_FILTER:\n\t\t\tconst trackFilter = action.payload;\n\t\t\treturn Object.assign({}, state, {trackFilter});\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/player.reducer.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpModule } from '@angular/http';\nimport { AppComponent } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport { GameMusicList } from \"../pages/home/list/game-music-list.component\";\nimport { StoreModule } from '@ngrx/store';\nimport { NavbarMusicControl } from \"../pages/home/nav/navbar-music-control.component\";\nimport { Playback } from \"../common/player/playback.component\";\nimport { GameMusicListItem } from \"../pages/home/list/game-music-list-item.component\";\nimport { GameMusicListItemMore } from \"../pages/home/list/game-music-list-item-more.component\";\nimport { reducer } from \"./app.reducers\";\nimport { PlayerActions } from \"../common/player/player.actions\";\nimport { HomeActions } from \"../pages/home/home.actions\";\nimport { GoogleAnalyticsTracker } from \"../common/tracking/google-analytics-tracker.provider\";\nimport { DurationFormatter } from \"../common/pipes/duration-formatter\";\nimport { VolumeSlider } from \"../common/player/volume-slider/volume-slider.component\";\nimport { StorageManager } from \"../common/storage/storage-manager.provider\";\nimport { NavbarSearch } from \"../pages/home/nav/navbar-search.component\";\nimport { NavbarLogo } from \"../pages/home/nav/navbar-logo.component\";\n\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tHomePage,\n\t\tVolumeSlider,\n\t\tPlayback,\n\t\tGameMusicList,\n\t\tGameMusicListItem,\n\t\tGameMusicListItemMore,\n\t\tNavbarMusicControl,\n\t\tNavbarSearch,\n\t\tNavbarLogo,\n\t\tDurationFormatter,\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpModule,\n\t\tIonicModule.forRoot(AppComponent, {}, {\n\t\t\tlinks: [\n\t\t\t\t{component: HomePage, name: 'Home', segment: ':trackName'}\n\t\t\t],\n\t\t}),\n\t\tStoreModule.provideStore(reducer),\n\t],\n\tbootstrap: [IonicApp],\n\tentryComponents: [\n\t\tAppComponent,\n\t\tHomePage,\n\t\tVolumeSlider,\n\t],\n\tproviders: [\n\t\t// {provide: LocationStrategy, useClass: PathLocationStrategy}, // when not using shebangs as location\n\t\t{ provide: ErrorHandler, useClass: IonicErrorHandler },\n\t\tPlayerActions,\n\t\tHomeActions,\n\t\tGoogleAnalyticsTracker,\n\t\tStorageManager,\n\t]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { HomePage } from '../pages/home/home';\nimport * as firebase from 'firebase/app';\nimport 'firebase/database';\n\n\nexport const firebaseConfig = {\n\tapiKey: 'AIzaSyD-qlduY4Mu89iXzch-OosGjf0dPb5zFLI',\n\tauthDomain: 'game-music-player.firebaseapp.com',\n\tdatabaseURL: 'https://game-music-player.firebaseio.com',\n\tstorageBucket: 'game-music-player.appspot.com',\n\tmessagingSenderId: '26986259894'\n};\n\n@Component({\n\ttemplateUrl: 'app.html'\n})\nexport class AppComponent {\n\trootPage: any = HomePage;\n\n\tconstructor(platform: Platform) {\n\t\tfirebase.initializeApp(firebaseConfig);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { PlayerState } from \"./player.reducer\";\nimport { AppState } from \"../../app/app.state\";\nimport { createSelector } from 'reselect';\n\nexport function getPlayerState(state: AppState): PlayerState {\n\treturn state.player;\n};\n\nexport function fetchVolume(state: PlayerState) {\n\treturn state.volume;\n}\n\nexport function fetchIsShuffle(state: PlayerState) {\n\treturn state.isShuffle;\n}\n\nexport function fetchIsRepeat(state: PlayerState) {\n\treturn state.isRepeat;\n}\n\nexport function fetchIsPlaying(state: PlayerState) {\n\treturn state.isPlaying;\n}\n\nexport function fetchIsMuted(state: PlayerState) {\n\treturn state.isMuted;\n}\n\nexport function fetchCurrentTrack(state: PlayerState) {\n\treturn state.currentTrack;\n}\n\nexport function fetchTracklistDownloaded(state: PlayerState) {\n\treturn state.trackListDownloaded;\n}\n\nexport function fetchAudioState(state: PlayerState) {\n\treturn state.audioState;\n}\n\nexport function fetchFaveIds(state: PlayerState) {\n\treturn state.faveIds;\n}\n\nexport function fetchTrackFilter(state: PlayerState) {\n\treturn state.trackFilter;\n}\n\n\n// *************************** PUBLIC API's ****************************\nexport const getVolume = createSelector(getPlayerState, fetchVolume);\nexport const isShuffle = createSelector(getPlayerState, fetchIsShuffle);\nexport const isRepeat = createSelector(getPlayerState, fetchIsRepeat);\nexport const isPlaying = createSelector(getPlayerState, fetchIsPlaying);\nexport const isMuted = createSelector(getPlayerState, fetchIsMuted);\nexport const getCurrentTrack = createSelector(getPlayerState, fetchCurrentTrack);\nexport const isTracklistDownloaded = createSelector(getPlayerState, fetchTracklistDownloaded);\nexport const getAudioState = createSelector(getPlayerState, fetchAudioState);\nexport const getFaveIds = createSelector(getPlayerState, fetchFaveIds);\nexport const getTrackFilter = createSelector(getPlayerState, fetchTrackFilter);\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/player.selectors.ts","import { Action } from '@ngrx/store';\nimport { Track } from \"./track.interface\";\nimport { GameMusicProvider } from \"../../pages/home/list/game-music.provider\";\nimport { AudioState } from \"./player.reducer\";\n\n\nexport class PlayerActions {\n\tstatic TOGGLE_SETTING = 'TOGGLE_SETTING';\n\tstatic SELECT_TRACK = 'SELECT_TRACK';\n\tstatic SET_AUDIO_STATE = 'SET_AUDIO_STATE';\n\tstatic SET_VOLUME = 'SET_VOLUME';\n\tstatic SET_LIST_DOWNLOADED = 'SET_LIST_DOWNLOADED';\n\tstatic TOGGLE_FAVE_TRACK = 'TOGGLE_FAVE_TRACK';\n\tstatic SET_SEARCH_FILTER = 'SET_SEARCH_FILTER';\n\n\ttoggleSetting(settingKey: string): Action {\n\t\treturn {\n\t\t\ttype: PlayerActions.TOGGLE_SETTING,\n\t\t\tpayload: settingKey\n\t\t};\n\t}\n\n\tsetVolume(volume: number): Action {\n\t\treturn {\n\t\t\ttype: PlayerActions.SET_VOLUME,\n\t\t\tpayload: volume\n\t\t};\n\t}\n\n\tselectTrack(track: Track): Action {\n\t\treturn {\n\t\t\ttype: PlayerActions.SELECT_TRACK,\n\t\t\tpayload: track\n\t\t};\n\t}\n\n\tnextTrack(currentTrack: Track, isShuffle: boolean): Action {\n\t\tconst track = (isShuffle) ?\n\t\t\tGameMusicProvider.getRandomTrack() :\n\t\t\tGameMusicProvider.getNextTrack(currentTrack);\n\t\treturn {\n\t\t\ttype: PlayerActions.SELECT_TRACK,\n\t\t\tpayload: track\n\t\t};\n\t}\n\n\tsetAudioState(audioState: AudioState) {\n\t\treturn {\n\t\t\ttype: PlayerActions.SET_AUDIO_STATE,\n\t\t\tpayload: audioState\n\t\t};\n\t}\n\n\tsetListDownloaded() {\n\t\treturn {\n\t\t\ttype: PlayerActions.SET_LIST_DOWNLOADED,\n\t\t\tpayload: true\n\t\t};\n\t}\n\n\ttoggleFaveTrack(track: Track) {\n\t\treturn {\n\t\t\ttype: PlayerActions.TOGGLE_FAVE_TRACK,\n\t\t\tpayload: track\n\t\t};\n\t}\n\n\tsetSearchFiter(filter: string) {\n\t\treturn {\n\t\t\ttype: PlayerActions.SET_SEARCH_FILTER,\n\t\t\tpayload: filter\n\t\t};\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/player.actions.ts","import { createSelector } from 'reselect';\nimport { AppState } from \"../../app/app.state\";\nimport { HomeState } from \"./home.reducer\";\n\nexport function getHomeState(state: AppState): HomeState {\n\treturn state.home;\n};\n\nexport function fetchTracksRendered(state: HomeState) {\n\treturn state.tracksRendered;\n}\n\n\n// *************************** PUBLIC API's ****************************\nexport const getTracksRendered = createSelector(getHomeState, fetchTracksRendered);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.selectors.ts","import { getTrackFilter } from './../../../common/player/player.selectors';\nimport { Component, Input } from '@angular/core';\nimport { Http } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport {Â Location } from '@angular/common';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../../app/app.state';\nimport { GameMusicProvider } from \"./game-music.provider\";\nimport * as firebase from 'firebase/app';\nimport { Track } from \"../../../common/player/track.interface\";\nimport { PlayerActions } from \"../../../common/player/player.actions\";\nimport { HomeActions } from \"../home.actions\";\nimport { getCurrentTrack, isTracklistDownloaded, getFaveIds } from \"../../../common/player/player.selectors\";\nimport { ListSource } from \"./list-source.enum\";\nimport { StorageManager } from \"../../../common/storage/storage-manager.provider\";\nimport '../../../common/rxjs.deps';\n\n\n@Component({\n\tselector: 'game-music-list',\n\ttemplate: `\n\t\t<ion-list>\n\t\t\t<game-music-list-item\n\t\t\t\t*ngFor=\"let track of bufferedTracks; let idx = index\"\n\t\t\t\t[track]=\"track\"\n\t\t\t\t[isSelected]=\"(currentTrack$ | async)?.trackName === track.trackName\"\n\t\t\t\t[idx]=\"idx\">\n\t\t\t</game-music-list-item>\n\t\t</ion-list>\n\n\t\t<ion-infinite-scroll\n\t\t\t(ionInfinite)=\"showMoreTracks($event)\"\n\t\t\tthreshold=\"100%\"\n\t\t\t[enabled]=\"isInfiniteScrollEnabled()\">\n\t\t\t<ion-infinite-scroll-content></ion-infinite-scroll-content>\n\t\t</ion-infinite-scroll>\n\t`\n})\nexport class GameMusicList {\n\n\t@Input() listSource: ListSource;\n\n\tcurrentTrack$: Observable<Track>;\n\n\tprivate BUFFERED_ITEM_AMOUNT = 50;\n\tprivate trackLimit = 1;\n\tprivate faveTracks: Track[];\n\tprivate listDownloaded$: Observable<boolean>;\n\tprivate faveIds$: Observable<string[]>;\n\tprivate trackFilter$: Observable<string>;\n\tprivate trackFilter: string;\n\tprivate tracksData = GameMusicProvider.data;\n\tprivate bufferedTracks: Track[] = [];\n\tprivate FIELD_TRACKS = 'tracks';\n\tprivate FIELD_TRACK_VERSION = 'trackVersion';\n\n\tconstructor(\n\t\tprivate http: Http,\n\t\tprivate location: Location,\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t\tprivate homeActions: HomeActions,\n\t\tprivate storeManager: StorageManager,\n\t) {\n\t\tthis.currentTrack$ = this.store.select(getCurrentTrack);\n\t\tthis.listDownloaded$ = this.store.select(isTracklistDownloaded);\n\t\tthis.faveIds$ = this.store.select(getFaveIds);\n\t\tthis.trackFilter$ = this.store.select(getTrackFilter);\n\n\t\t// decide if the track is selected\n\t\t// this.currentTrack$\n\t\t// \t.filter(currentTrack => !!currentTrack)\n\t\t// \t.subscribe(currentTrack => this.selectedTrack = currentTrack);\n\t}\n\n\tngOnInit() {\n\t\tif (this.listSource === ListSource.ALL) {\n\t\t\tthis.loadTracks()\n\t\t\t\t// .first()\n\t\t\t\t.subscribe(tracks => {\n\t\t\t\t\tthis.tracksData.tracks = tracks;\n\t\t\t\t\tthis.bufferedTracks = this.tracksData.tracks\n\t\t\t\t\t\t.slice(0, this.BUFFERED_ITEM_AMOUNT);\n\n\t\t\t\t\t// in case of an update, don't replay the track.\n\t\t\t\t\t// that means there is already a track playing.\n\t\t\t\t\t// @todo\n\n\t\t\t\t\t// check if there is a track in the url already to play initially\n\t\t\t\t\tconst wantedTrackName = this.location.path()\n\t\t\t\t\t\t.replace('/', ''); // remove the slashes\n\t\t\t\t\tconst track = (!wantedTrackName) ?\n\t\t\t\t\t\tGameMusicProvider.getRandomTrack() :\n\t\t\t\t\t\tGameMusicProvider.getTrackByName(wantedTrackName);\n\n\t\t\t\t\tthis.store.dispatch(this.playerActions.selectTrack(track));\n\t\t\t\t\tthis.store.dispatch(this.playerActions.setListDownloaded());\n\t\t\t\t});\n\n\t\t\t// apply filtering to bufferedTracks\n\t\t\tthis.trackFilter$\n\t\t\t\t// .debounceTime(1000)\n\t\t\t\t.subscribe(trackFilter => {\n\t\t\t\t\t// only filter if there has been tracksData already there\n\t\t\t\t\tif (this.tracksData.tracks.length > 0)Â {\n\t\t\t\t\t\tthis.trackLimit = 1; // resetting the trackLimit\n\t\t\t\t\t\tthis.trackFilter = trackFilter;\n\t\t\t\t\t\tthis.addMoreTracks(this.tracksData.tracks);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t} else if (this.listSource === ListSource.FAVES) {\n\t\t\tthis.listDownloaded$\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.subscribe(faveIds => {\n\t\t\t\t\tthis.faveIds$\n\t\t\t\t\t\t.subscribe(faveIds => {\n\t\t\t\t\t\t\tthis.faveTracks = GameMusicProvider.getTracksByIds(faveIds);\n\t\t\t\t\t\t\tthis.bufferedTracks = this.faveTracks\n\t\t\t\t\t\t\t\t.slice(0, this.BUFFERED_ITEM_AMOUNT);\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n\n\tshowMoreTracks(infiniteScroll) {\n\t\tconst targetTracks = (this.listSource === ListSource.ALL) ?\n\t\t\tthis.tracksData.tracks :\n\t\t\tthis.faveTracks;\n\t\tthis.addMoreTracks(targetTracks);\n\t\tinfiniteScroll.complete();\n\t}\n\n\tisInfiniteScrollEnabled() {\n\t\treturn (this.trackLimit * this.BUFFERED_ITEM_AMOUNT) < this.tracksData.tracks.length;\n\t}\n\n\tprivate addMoreTracks(targetTracks) {\n\t\tthis.bufferedTracks = targetTracks\n\t\t\t.filter(track => !this.trackFilter || (\n\t\t\t\ttrack.creator.toLowerCase().indexOf(this.trackFilter.toLowerCase()) !== -1 ||\n\t\t\t\ttrack.trackName.toLowerCase().indexOf(this.trackFilter.toLowerCase()) !== -1\n\t\t\t))\n\t\t\t.slice(0, this.BUFFERED_ITEM_AMOUNT * this.trackLimit);\n\t\tthis.trackLimit++;\n\t}\n\n\t/**\n\t * check to load the tracks from localStorage first and update the cache later again.\n\t */\n\tprivate loadTracks() {\n\t\treturn new Observable<Array<Track>>(observer => {\n\t\t\t// check if track version is the same like in the localStorage\n\t\t\tconst tracks = localStorage.getItem(this.FIELD_TRACKS);\n\t\t\tfirebase.database()\n\t\t\t\t.ref('versions/tracks')\n\t\t\t\t.once('value')\n\t\t\t\t.then(snapshot => {\n\t\t\t\t\tconst localVersion = parseInt(\"\" + localStorage.getItem(this.FIELD_TRACK_VERSION), 10);\n\t\t\t\t\tconst defactoVersion = snapshot.val() || 0; // should never be 0â¦ Â¯\\_(ã)_/Â¯\n\t\t\t\t\tif ((!localVersion && tracks) || localVersion < defactoVersion) {\n\t\t\t\t\t\t// track entries are old.\n\t\t\t\t\t\t// update localStorage and refetch `FIELD_TRACKS`.\n\t\t\t\t\t\tthis.fetchTracks()\n\t\t\t\t\t\t\t.subscribe(tracks => {\n\t\t\t\t\t\t\t\tobserver.next(tracks);\n\t\t\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobserver.complete();\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem(this.FIELD_TRACK_VERSION, defactoVersion);\n\t\t\t\t});\n\n\t\t\tif (tracks) {\n\t\t\t\tobserver.next(JSON.parse(tracks));\n\t\t\t} else {\n\t\t\t\tthis.fetchTracks()\n\t\t\t\t\t.subscribe(tracks => observer.next(tracks));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tprivate fetchTracks() {\n\t\treturn new Observable<Array<Track>>(observer => {\n\t\t\tfirebase.database()\n\t\t\t\t.ref('/tracks')\n\t\t\t\t.once('value')\n\t\t\t\t.then(snapshot => {\n\t\t\t\t\tconst val = snapshot.val();\n\t\t\t\t\tconst result = Object.keys(val)\n\t\t\t\t\t\t.map(key => val[key]);\n\t\t\t\t\tobserver.next(result);\n\t\t\t\t\t// save the tracks in localStorage for caching\n\t\t\t\t\tlocalStorage.setItem(this.FIELD_TRACKS, JSON.stringify(result));\n\t\t\t\t});\n\t\t});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/list/game-music-list.component.ts","import { Component } from '@angular/core';\n\nimport { Store } from '@ngrx/store';\nimport { Observable } from \"rxjs\";\nimport { AppState } from \"../../../app/app.state\";\nimport { PlayerActions } from \"../../../common/player/player.actions\";\nimport { isShuffle, isRepeat } from \"../../../common/player/player.selectors\";\nimport { GoogleAnalyticsTracker } from \"../../../common/tracking/google-analytics-tracker.provider\";\nimport { PopoverController } from \"ionic-angular\";\nimport { VolumeSlider } from \"../../../common/player/volume-slider/volume-slider.component\";\n\n\n@Component({\n\tselector: 'navbar-music-control',\n\ttemplate: `\n\t\t<ion-buttons start end class=\"navbar-music-control\">\n\t\t\t<button ion-button icon-only start (click)=\"openVolumeSlider($event)\" class=\"navbar-music-control--active\">\n\t\t\t\t<ion-icon [name]=\"(volume$ | async) == 0 ? 'volume-off' : 'volume-up'\"></ion-icon>\n\t\t\t</button>\n\t\t\t<button ion-button icon-only (click)=\"toggleSetting('isRepeat')\" [ngClass]=\"{'navbar-music-control--active': (isRepeat$ | async)}\">\n\t\t\t\t<ion-icon name=\"repeat\"></ion-icon>\n\t\t\t</button>\n\t\t\t<!--\n\t\t\t<button ion-button icon-only (click)=\"toggleSetting('isShuffle')\" [ngClass]=\"{'navbar-music-control--active': (isShuffle$ | async)}\">\n\t\t\t\t<ion-icon name=\"shuffle\"></ion-icon>\n\t\t\t</button>\n\t\t\t-->\n\t\t\t<a (click)=\"track\" href=\"https://github.com/zwacky/game-music-player\" target=\"_blank\" rel=\"noopener\" ion-button icon-only class=\"navbar-music-control--active\" title=\"Go to GitHub project\">\n\t\t\t\t<ion-icon name=\"logo-github\"></ion-icon>\n\t\t\t</a>\n\t\t</ion-buttons>\n\t`\n})\nexport class NavbarMusicControl {\n\n\tisShuffle$: Observable<boolean>;\n\tisRepeat$: Observable<boolean>;\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t\tprivate googleAnalyticsTracker: GoogleAnalyticsTracker,\n\t\tprivate popoverCtrl: PopoverController,\n\t) {\n\t\tthis.isShuffle$ = this.store.select(isShuffle);\n\t\tthis.isRepeat$ = this.store.select(isRepeat);\n\t}\n\n\ttoggleSetting(settingKey: string) {\n\t\tthis.store.dispatch(this.playerActions.toggleSetting(settingKey));\n\t}\n\n\topenVolumeSlider(evt: Event) {\n\t\tlet popover = this.popoverCtrl.create(VolumeSlider);\n\t\tpopover.present({\n\t\t\tev: evt\n\t\t});\n\t}\n\n\ttrackClickout() {\n\t\tthis.googleAnalyticsTracker.trackEvent('page',  {\n\t\t\taction: 'project_clicked'\n\t\t});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/nav/navbar-music-control.component.ts","import { Observer } from 'rxjs/Observer';\nimport { Observable } from 'rxjs/Observable';\nimport { Component } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../app/app.state';\nimport { ToastController } from 'ionic-angular';\nimport { Howl } from 'howler';\nimport { TrackScroller } from './track-scroller.provider';\nimport { AudioState } from './player.reducer';\nimport { Track } from './track.interface';\nimport { PlayerActions } from './player.actions';\nimport { getVolume, isMuted, getCurrentTrack, isPlaying, isShuffle, isRepeat, getAudioState } from './player.selectors';\nimport { GoogleAnalyticsTracker } from '../tracking/google-analytics-tracker.provider';\nimport '../rxjs.deps';\n\n\n@Component({\n\tselector: 'playback',\n\ttemplate: `\n\t\t<ion-footer>\n\t\t\t<div class=\"playback\" [ngClass]=\"{'playback--shown': true}\">\n\n\t\t\t\t<input\n\t\t\t\t\ttype=\"range\"\n\t\t\t\t\tclass=\"playback__seeker\"\n\t\t\t\t\t[value]=\"seekerValue\"\n\t\t\t\t\tstep=\"0.01\"\n\t\t\t\t\t(change)=\"onRangeChanged($event)\"\n\t\t\t\t\t(input)=\"onRangeStarted()\">\n\n\t\t\t\t<ion-fab top left edge class=\"playback--fab\" (click)=\"togglePlay()\">\n\t\t\t\t\t<button ion-fab>\n\t\t\t\t\t\t<!-- <ion-icon [name]=\"(currentTrack$ | async)?.isFaved ? 'heart' : 'heart-outline'\"></ion-icon> -->\n\t\t\t\t\t\t<ion-icon [name]=\"(isPlaying$ | async) ? 'pause' : 'play'\"></ion-icon>\n\t\t\t\t\t</button>\n\t\t\t\t</ion-fab>\n\n\t\t\t\t<ion-toolbar>\n\n\t\t\t\t\t<div class=\"playback__timing\">\n\t\t\t\t\t\t<span class=\"playback__timing--current\">{{ (trackDurationPosition$ | async) | fromSeconds }}</span>\n\t\t\t\t\t\t<span class=\"playback__timing--separator\">/</span>\n\t\t\t\t\t\t<span class=\"playback__timing--total\">{{ trackDuration | fromSeconds }}</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"playback__control\">\n\t\t\t\t\t\t<ion-buttons class=\"playback__control__buttons\">\n\t\t\t\t\t\t\t<button ion-button icon-only end (click)=\"nextTrack()\">\n\t\t\t\t\t\t\t\t<ion-icon name=\"skip-forward\"></ion-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button ion-button icon-only end (click)=\"toggleFave()\">\n\t\t\t\t\t\t\t\t<ion-icon name=\"heart\" color=\"dark\"></ion-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t<button ion-button icon-only start (click)=\"openVolumeSlider($event)\">\n\t\t\t\t\t\t\t\t<ion-icon [name]=\"(volume$ | async) == 0 ? 'volume-off' : 'volume-up'\"></ion-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t</ion-buttons>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"playback__display\" (click)=\"scrollToTrack()\" *ngIf=\"(currentTrack$ | async)\">\n\t\t\t\t\t\t<div class=\"playback__display--creator\">{{ (currentTrack$ | async)?.creator }}</div>\n\t\t\t\t\t\t<div class=\"playback__display--title\">{{ (currentTrack$ | async)?.title }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ion-toolbar>\n\t\t\t</div>\n\t\t</ion-footer>\n\t`\n})\nexport class Playback {\n\n\tcurrentTrack$: Observable<Track>;\n\tvolume$: Observable<number>;\n\tisMuted$: Observable<boolean>;\n\tisPlaying$: Observable<boolean>;\n\tisShuffle$: Observable<boolean>;\n\tisRepeat$: Observable<boolean>;\n\taudioState$: Observable<AudioState>;\n\ttrackDurationPosition$: Observable<number>;\n\n\tseekerValue: number = 0;\n\tseekerStyle: any = {};\n\ttrackDuration: number = 0;\n\n\tprivate audio: any; // Howl instance\n\tprivate audioState: AudioState;\n\tprivate volumeLevel = 0;\n\tprivate currentTrack: Track = null;\n\tprivate pausedTrack: Track = null;\n\tprivate tempPlayerState: {isShuffle: boolean, isRepeat: boolean} = {\n\t\tisShuffle: null,\n\t\tisRepeat: null,\n\t};\n\tprivate isRangeSliderMoving = false;\n\tprivate seekerObserver: Observer<number>;\n\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t\tprivate googleAnalyticsTracker: GoogleAnalyticsTracker,\n\t) {\n\t\tthis.volume$ = this.store.select(getVolume);\n\t\tthis.isMuted$ = this.store.select(isMuted);\n\t\tthis.currentTrack$ = this.store.select(getCurrentTrack);\n\t\tthis.isPlaying$ = this.store.select(isPlaying);\n\t\tthis.isShuffle$ = this.store.select(isShuffle);\n\t\tthis.isRepeat$ = this.store.select(isRepeat);\n\t\tthis.audioState$ = this.store.select(getAudioState);\n\n\n\t\tObservable\n\t\t\t.interval(200)\n\t\t\t.subscribe(() => {\n\t\t\t\tif (this.audioState === AudioState.LOADED && !this.isRangeSliderMoving) {\n\t\t\t\t\tthis.seekerValue = this.audio.seek() / this.trackDuration * 100;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// bind space to toggling play/pause and omit if a input field is focused (search)\n\t\twindow.addEventListener('keydown', (evt) => {\n\t\t\tif (evt.which === 32 && ['input'].indexOf(document.activeElement.tagName.toLowerCase()) === -1) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.togglePlay('space');\n\t\t\t}\n\t\t});\n\n\n\t\t// handle volume\n\t\tthis.volume$\n\t\t\t.subscribe(volume => {\n\t\t\t\tthis.volumeLevel = volume;\n\t\t\t\tthis.setPlayerVolume(volume);\n\t\t\t});\n\n\t\t// handle muted\n\t\tthis.isMuted$\n\t\t\t.subscribe(isMuted => this.setPlayerVolume((isMuted) ? 0 : this.volumeLevel));\n\n\t\t// handle track loading\n\t\tthis.currentTrack$\n\t\t\t.filter(track => track !== null)\n\t\t\t.subscribe(track => {\n\t\t\t\t// check if the same track is already loaded. if yes, restart it.\n\t\t\t\tif (this.currentTrack === track) {\n\t\t\t\t\tif (this.audioState === AudioState.LOADED) {\n\t\t\t\t\t\tthis.audio.seek(0);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst base = 'https://tracks.gamemusicplayer.io';\n\t\t\t\t\tconst url = `${base}/${track.trackName}`;\n\n\t\t\t\t\tif (this.audio) {\n\t\t\t\t\t\tthis.audio.stop();\n\t\t\t\t\t}\n\n\t\t\t\t\t// have it wrapped around timeout for no ugly race conditions\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.audio = new Howl({\n\t\t\t\t\t\t\tsrc: url,\n\t\t\t\t\t\t\tautoplay: true,\n\t\t\t\t\t\t\tvolume: this.volumeLevel / 100,\n\t\t\t\t\t\t\thtml5: true,\n\t\t\t\t\t\t\tonload: () => this.onTrackLoaded(),\n\t\t\t\t\t\t\tonend: () => this.onTrackEnded(),\n\t\t\t\t\t\t\tonseek: () => this.onSeeked(),\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.currentTrack = track;\n\t\t\t\t\tthis.store.dispatch(this.playerActions.setAudioState(AudioState.LOADING));\n\n\t\t\t\t\tif (this.seekerObserver) {\n\t\t\t\t\t\tthis.seekerObserver.next(0);\n\t\t\t\t\t}\n\t\t\t\t\tthis.trackDuration = 0;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// handle pause tracking\n\t\t// - only if a track has been loaded\n\t\t// - only unpause if it's the same track when it's been paused\n\t\tthis.isPlaying$\n\t\t\t.subscribe(isPlaying => {\n\t\t\t\tif (!isPlaying) {\n\t\t\t\t\tif (this.audio) {\n\t\t\t\t\t\tthis.audio.pause();\n\t\t\t\t\t\tthis.pausedTrack = this.currentTrack;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// only start playing the track if it's been the same that has been halted\n\t\t\t\t\tif (this.audio && this.pausedTrack === this.currentTrack) {\n\t\t\t\t\t\tthis.audio.play();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t// handle isShuffle property\n\t\tthis.isShuffle$\n\t\t\t.subscribe(isShuffle => this.tempPlayerState.isShuffle = isShuffle);\n\n\t\t// handle isRepeat property\n\t\tthis.isRepeat$\n\t\t\t.subscribe(isRepeat => this.tempPlayerState.isRepeat = isRepeat);\n\n\t\t// handle seeker value\n\t\tthis.audioState$\n\t\t\t.subscribe(audioState => {\n\t\t\t\tthis.audioState = audioState;\n\t\t\t\tif (audioState === AudioState.LOADING) {\n\t\t\t\t\tthis.seekerValue = 0;\n\t\t\t\t}\n\t\t\t});\n\n\t\t/**\n\t\t * update the current track duration position upon:\n\t\t * - every 1 seconds\n\t\t * - when the player is playing/pausing\n\t\t */\n\t\tthis.trackDurationPosition$ = Observable.merge(\n\t\t\tObservable\n\t\t\t\t.create(observer => this.seekerObserver = observer),\n\t\t\tObservable\n\t\t\t\t.interval(500)\n\t\t\t\t.map(() => (this.audioState === AudioState.LOADED) ? this.audio.seek() : 0),\n\t\t);\n\t}\n\n\ttogglePlay(triggeredBy = 'click') {\n\t\tthis.store.dispatch(this.playerActions.toggleSetting('isPlaying'));\n\n\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\taction: 'toggle_play',\n\t\t\tlabel: triggeredBy\n\t\t});\n\t}\n\n\ttoggleFave() {\n\t\tthis.store.dispatch(this.playerActions.toggleFaveTrack(this.currentTrack));\n\n\t\tthis.trackFaveToggled(this.currentTrack.trackName);\n\t}\n\n\tnextTrack() {\n\t\tconst percentageCompleted = this.audio.seek() / this.trackDuration * 100;\n\t\tthis.trackCompleted(parseInt((percentageCompleted).toFixed(0)));\n\t\tthis.trackNextClicked();\n\n\t\tthis.store.dispatch(this.playerActions.nextTrack(this.currentTrack, this.tempPlayerState.isShuffle));\n\t}\n\n\tscrollToTrack() {\n\t\tTrackScroller.scrollToSelectedTrack();\n\t}\n\n\t/**\n\t * event upon changeing the range manually.\n\t */\n\tonRangeChanged(evt) {\n\t\tif (this.audioState === AudioState.LOADED) {\n\t\t\tconst seconds = this.trackDuration * (evt.target.value / 100);\n\t\t\tthis.audio.seek(seconds);\n\t\t\tthis.isRangeSliderMoving = false;\n\t\t}\n\t}\n\n\tonRangeStarted() {\n\t\tthis.isRangeSliderMoving = true;\n\t}\n\n\tprivate onTrackLoaded() {\n\t\tthis.store.dispatch(this.playerActions.setAudioState(AudioState.LOADED));\n\t\tthis.trackDuration = this.audio.duration();\n\n\t\tthis.googleAnalyticsTracker.trackEvent('track', {\n\t\t\taction: 'started',\n\t\t\tlabel: this.currentTrack.trackName\n\t\t});\n\t}\n\n\tprivate onTrackEnded() {\n\t\tif (this.tempPlayerState.isRepeat) {\n\t\t\tthis.audio.play();\n\t\t} else {\n\t\t\tthis.store.dispatch(this.playerActions.setAudioState(AudioState.UNLOADED));\n\t\t\tthis.store.dispatch(this.playerActions.nextTrack(this.currentTrack, this.tempPlayerState.isShuffle));\n\t\t\t// needs to unload otherwise onstop event will be triggered twice\n\t\t\tthis.audio.unload();\n\t\t}\n\t\tthis.trackCompleted(100);\n\t}\n\n\t/**\n\t * whenever the user sought (ha! thought I didn't know the past tense of seek didcha!) on the player.\n\t */\n\tprivate onSeeked() {\n\t\tthis.seekerObserver.next(this.audio.seek());\n\t}\n\n\tprivate setPlayerVolume(volume) {\n\t\tif (this.audio) {\n\t\t\tthis.audio.volume(volume / 100);\n\t\t}\n\t}\n\n\tprivate trackCompleted(percentage: number) {\n\t\tthis.googleAnalyticsTracker.trackEvent('track', {\n\t\t\taction: 'completed',\n\t\t\tlabel: percentage,\n\t\t\tnonInteraction: true,\n\t\t});\n\t}\n\n\tprivate trackNextClicked() {\n\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\taction: 'next_clicked'\n\t\t});\n\t}\n\n\tprivate trackFaveToggled(trackName) {\n\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\taction: 'fave_toggled',\n\t\t\tlabel: trackName\n\t\t});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/player/playback.component.ts","import { Component, Input } from '@angular/core';\nimport { Store } from \"@ngrx/store\";\nimport { AppState } from \"../../../app/app.state\";\nimport { Track } from \"../../../common/player/track.interface\";\nimport { PlayerActions } from \"../../../common/player/player.actions\";\nimport { GoogleAnalyticsTracker } from \"../../../common/tracking/google-analytics-tracker.provider\";\nimport { HomeActions } from \"../home.actions\";\n\n@Component({\n\tselector: 'game-music-list-item',\n\ttemplate: `\n\t\t<button\n\t\t\tion-item\n\t\t\tclass=\"game-music-list-item\"\n\t\t\t[ngClass]=\"{'game-music-list-item--selected': isSelected}\"\n\t\t\t(click)=\"selectTrack(track)\">\n\t\t\t<div class=\"game-music-list-item__container\">\n\t\t\t\t<div class=\"game-music-list-item__container__symbol\">\n\t\t\t\t\t<ion-icon name=\"musical-notes\"></ion-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"game-music-list-item__container__bold\">\n\t\t\t\t\t{{ track.creator }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"game-music-list-item__container__casual\">\n\t\t\t\t\t{{ track.title }}\n\t\t\t\t</div>\n\t\t\t\t<game-music-list-item-more></game-music-list-item-more>\n\t\t\t</div>\n\t\t\t<!-- <strong>{{ track.creator }}</strong> {{ track.title}} -->\n\t\t</button>\n\t`,\n})\nexport class GameMusicListItem {\n\n\t@Input() track: Track;\n\t@Input() isSelected: boolean;\n\t@Input() idx: number;\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t\tprivate googleAnalyticsTracker: GoogleAnalyticsTracker,\n\t\tprivate homeActions: HomeActions,\n\t) {\n\n\t}\n\n\tngOnInit() {\n\t\tif (this.idx === 0) {\n\t\t\tthis.store.dispatch(this.homeActions.setRendered(true));\n\t\t}\n\t}\n\n\tselectTrack(track: Track) {\n\t\t// check if the track will be restarted\n\t\tif (this.isSelected) {\n\t\t\tthis.store.dispatch(this.playerActions.selectTrack(null));\n\n\t\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\t\taction: 'track_selected_restart',\n\t\t\t\tlabel: track.trackName\n\t\t\t});\n\t\t}\n\t\tthis.store.dispatch(this.playerActions.selectTrack(track));\n\n\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\taction: 'track_selected',\n\t\t\tlabel: track.trackName\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/list/game-music-list-item.component.ts","import { Component } from '@angular/core';\n\n@Component({\n\tselector: 'game-music-list-item-more',\n\ttemplate: `\n\t\t<div class=\"game-music-list-item__container__more\" clear>\n\n\t\t</div>\n\t`,\n})\nexport class GameMusicListItemMore {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/list/game-music-list-item-more.component.ts","import { PlayerReducer } from \"../common/player/player.reducer\";\nimport { HomeReducer } from \"../pages/home/home.reducer\";\nimport { ActionReducer, combineReducers } from \"@ngrx/store\";\nimport { Â storeFreeze } from 'ngrx-store-freeze';\nimport { compose } from \"@ngrx/core\";\nimport { AppState } from \"./app.state\";\n\nconst reducers = {\n\tplayer: PlayerReducer,\n\thome: HomeReducer,\n};\n\nexport const developmentReducer: ActionReducer<AppState> = compose(storeFreeze, combineReducers)(reducers);\nconst productionReducer: ActionReducer<AppState> = combineReducers(reducers);\n\nexport function reducer(state: any, action: any) {\n\t// TODO set reducers according to environment (dev, prod)\n\tconst environment = 'dev';\n\treturn (environment === 'dev') ?\n\t\tproductionReducer(state, action) :\n\t\tdevelopmentReducer(state, action);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.reducers.ts","import { Action } from '@ngrx/store';\nimport { HomeActions } from \"./home.actions\";\n\nexport interface HomeState {\n\ttracksRendered: boolean;\n};\n\nconst defaultState: HomeState = {\n\ttracksRendered: false,\n};\n\nexport function HomeReducer(state: HomeState = defaultState, action: Action): any {\n\tswitch(action.type) {\n\n\t\tcase HomeActions.RENDERED:\n\t\t\tconst changedSetting = {\n\t\t\t\ttracksRendered: action.payload\n\t\t\t};\n\t\t\treturn Object.assign({}, state, changedSetting);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.reducer.ts","import { Pipe, PipeTransform } from \"@angular/core\";\n\n@Pipe({name: 'fromSeconds'})\nexport class DurationFormatter implements PipeTransform {\n\ttransform(value: number): string {\n\t\tconst minutes = Math.floor(value / 60);\n\t\tconst seconds = Math.floor(value - (minutes * 60));\n\t\treturn [\n\t\t\t('00' + minutes).substr(-2),\n\t\t\t('00' + seconds).substr(-2),\n\t\t].join(':');\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/pipes/duration-formatter.ts","import { GoogleAnalyticsTracker } from './../../../common/tracking/google-analytics-tracker.provider';\nimport { PlayerActions } from './../../../common/player/player.actions';\nimport { Store } from '@ngrx/store';\nimport { Component, ViewChild } from '@angular/core';\nimport { AppState } from '../../../app/app.state';\n\n@Component({\n\tselector: 'navbar-search',\n\ttemplate: `\n\t<ion-item>\n\t\t<ion-input\n\t\t\t#navbarsearch\n\t\t\ttype=\"text\"\n\t\t\tplaceholder=\"Search track or gameâ¦\"\n\t\t\t(keyup)=\"changedInput($event)\"\n\t\t\t(blur)=\"blurred($event)\">\n\t\t</ion-input>\n\t</ion-item>\n\t`\n})\nexport class NavbarSearch {\n\n\t@ViewChild('navbarsearch') navbarSearch;\n\n\tconstructor(\n\t\tprivate store: Store<AppState>,\n\t\tprivate playerActions: PlayerActions,\n\t\tprivate googleAnalyticsTracker: GoogleAnalyticsTracker,\n\t) {\n\t\t// bind cmd + f / ctrl + f to automatically focus on the search input\n\t\twindow.addEventListener('keydown', (evt) => {\n\t\t\tif ((evt.ctrlKey || evt.metaKey) && evt.keyCode === 70) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.navbarSearch.setFocus();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * every keystroke updates the filter.\n\t *\n\t * @param evt {Event}\n\t */\n\tchangedInput(evt) {\n\t\tif (evt.keyCode === 27) { // escape key\n\t\t\tevt.target.blur();\n\t\t} else {\n\t\t\tconst value = evt.target.value;\n\t\t\tthis.store.dispatch(this.playerActions.setSearchFiter(value));\n\t\t}\n\t}\n\n\t/**\n\t * blur event is treated as a successful search.\n\t * searches that are done, but result in a bounce are therefore not tracked.\n\t */\n\tblurred(evt) {\n\t\tconst value = evt.target.value;\n\t\tif (value) {\n\t\t\tthis.googleAnalyticsTracker.trackEvent('player', {\n\t\t\t\taction: 'searched',\n\t\t\t\tlabel: value\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/nav/navbar-search.component.ts","import { Component } from '@angular/core';\n\n@Component({\n\tselector: 'navbar-logo',\n\ttemplate: `\n\t\t<div style=\"display: inline-block; height: 100%; padding: 15px 0 0 15px;\">\n\t\t\t<img\n\t\t\t\tsrc=\"/assets/logo/gamemusicplayer-logo.png\"\n\t\t\t\talt=\"Game Music Player\"\n\t\t\t\ttitle=\"Game Music Player\"\n\t\t\t\tstyle=\"display: inline-block; vertical-align: middle; width: 40px; border: 1px solid #29434e; border-radius: 50%;;\">\n\t\t</div>\n\t`\n})\nexport class NavbarLogo {\n\tconstructor() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/nav/navbar-logo.component.ts","import { Injectable } from '@angular/core';\n\ndeclare var ga:Function;\n\ninterface TrackingProperties {\n\taction?: string;\n\tlabel?: string | number | boolean;\n\tvalue?: number;\n\tnonInteraction?: boolean;\n}\n\n@Injectable()\nexport class GoogleAnalyticsTracker {\n\ttrackEvent(category: string, properties: TrackingProperties) {\n\t\tconst nonInteraction = ('nonInteraction' in properties) ?\n\t\t\tproperties.nonInteraction :\n\t\t\tfalse;\n\t\tga('send', 'event', category, properties.action, properties.label, properties.value, {nonInteraction})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/tracking/google-analytics-tracker.provider.ts","import { Action } from \"@ngrx/store\";\n\nexport class HomeActions {\n\tstatic RENDERED = 'RENDERED';\n\n\tsetRendered(value: boolean): Action {\n\t\treturn {\n\t\t\ttype: HomeActions.RENDERED,\n\t\t\tpayload: value\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.actions.ts"],"sourceRoot":""}